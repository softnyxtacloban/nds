<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Admin Voucher Generator</title>
        <style>
            body {
                font-family: sans-serif;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background: #f0f0f0;
            }

            .container {
                background: white;
                padding: 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                text-align: center;
            }

            input {
                padding: 0.5rem;
                width: 150px;
                margin: 0.5rem;
            }

            button {
                padding: 0.5rem 1rem;
                cursor: pointer;
            }

            ul {
                text-align: left;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h2>Generate Vouchers</h2>
            <form id="generateForm">
                Hours: <input type="number"
                       name="hours"
                       min="1"
                       required>
                Count: <input type="number"
                       name="count"
                       min="1"
                       required>
                <br>
                <button type="submit">Generate</button>
            </form>
            <h3>Generated Codes:</h3>
            <ul id="voucherList"></ul>
        </div>

        <script>
            document.getElementById('generateForm').onsubmit = async function (e) {
                e.preventDefault();
                const form = e.target;
                const hours = form.hours.value;
                const count = form.count.value;

                const params = new URLSearchParams({ hours, count });
                const response = await fetch('/cgi-bin/voucher_generate.sh?' + params.toString());
                const data = await response.json();

                const list = document.getElementById('voucherList');
                list.innerHTML = '';
                data.codes.forEach(code => {
                    const li = document.createElement('li');
                    li.textContent = `${code} (${hours} hours)`;
                    list.appendChild(li);
                });
            };
        </script>
    </body>

</html>